<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Wednesday, March 19, 2025, 10:15 PM -->
<!-- MuClient version 5.07-pre -->

<!-- Plugin "Quest_Campaign_Tracker" generated by Plugin Wizard -->

<muclient>
<plugin
   name="Quest_Campaign_Tracker"
   author="Bartoc"
   id="b4d0dab117586c793985723f"
   language="Lua"
   purpose="Adds a quest and campaign target window"
   save_state="y"
   date_written="2025-03-19 22:13:42"
   requires="5.07"
   version="1.0"
   >
<description trim="y">
<![CDATA[
Adds a quest and campaign target window
]]>
</description>

</plugin>


<!--  Get our standard constants -->

<include name="constants.lua"/>

<!--  Triggers  -->

<triggers>
  <trigger
   enabled="y"
   match="* tells you 'You have * minutes to complete your quest.'"
   name="quest_timer"
   send_to="9"
   sequence="100"
   variable="quest_timer"
  >
  <send>%2</send>
  </trigger>
  <trigger
   enabled="y"
   match="* tells you 'Congratulations, *, on completing your quest!'"
   name="quest_complete"
   send_to="9"
   sequence="100"
   variable="quest_cooldown"
  >
  <send>30</send>
  </trigger>
  <trigger
   enabled="y"
   match="* tells you 'Thank you, brave *!'"
   sequence="100"
  >
  <send>noecho quest info</send>
  </trigger>
  <trigger
   enabled="y"
   match="* can be found in the vicinity of * which"
   name="quest_room"
   send_to="9"
   sequence="100"
   variable="quest_room"
  >
  <send>%2</send>
  </trigger>
  <trigger
   enabled="y"
   match="is in the general area of *."
   name="quest_zone"
   send_to="9"
   sequence="100"
   variable="quest_zone"
  >
  <send>%1</send>
  </trigger>
  <trigger
   enabled="y"
   match="You are on a quest to slay *!"
   name="quest_target"
   send_to="9"
   sequence="100"
   variable="quest_target"
  >
  <send>%1</send>
  </trigger>
  <trigger
   enabled="y"
   lines_to_match="2"
   match="You inform * that you have completed your quest. \n* tells you 'Congratulations, *, on completing your quest!'"
   multi_line="y"
   name="quest_cooldown"
   regexp="y"
   send_to="9"
   sequence="100"
   variable="quest_cooldown"
  >
  <send>31</send>
  </trigger>
</triggers>

<!--  Variables  -->

<variables>
  <variable name="quest_mob">MONSTER</variable>
  <variable name="quest_cooldown">30</variable>
  <variable name="quest_room">NONE</variable>
  <variable name="quest_timer">60</variable>
  <variable name="quest_zone">ZONE</variable>
</variables>

<!--  Script  -->

<script>
<![CDATA[
require "gmcphelper"
require "themed_miniwindows"
require "tprint"
dofile(GetInfo(60).."aardwolf_colors.lua")

local gmcp_state = 1
local char_state = {3, 4, 8, 11, 12}

CQWindow = ThemedTextWindow(
   GetPluginID()  -- string, required, a unique identifier for this window
   0,  -- integer, required, where to put it if the player hasn't moved it
   0,  -- integer, required, where to put it if the player hasn't moved it
   400,  -- integer, required, how big to make it if the player hasn't moved it
   100,  -- integer, required, how big to make it if the player hasn't moved it
   "Quest Campaign Window",  -- string, optional (nil means no titlebar), text to put into the title
   "center",  -- string, optional (default is "center"), "left", "center", or "right"
   false,  -- boolean, optional (default is false), true adds a close button in the top left
   true,  -- boolean, optional (default is false), make the window resizeable
   true,  -- boolean, optional (default is false), add a scrollbar and mousewheel scrolling
   true,  -- boolean, optional (default is false), make the text selectable
   true,  -- boolean, optional (default is false), make the text copyable via right-click
   false,  -- boolean, optional (default is false), turn detected URLs into clickable links
   false,  -- boolean, optional (default is false), automatically wrap text lines that are too wide
   nil,  -- string, optional (default is Dina), override the title font name
   nil,  -- integer, optional (default is 10), override the title font size
   nil,  -- string, optional (default is Dina), override the body text font name
   10,  -- integer, optional (default is 10), override the body text font size
   nil,  -- integer, optional (default is 1000), maximum number of text lines to keep
   nil,  -- integer, optional (default is 5 pixels), space between text and miniwindow frame
   nil,  -- boolean, optional (default is false), true will prevent the window from appearing until you call :show() on it
   false  -- boolean, optional (default is false), if true, pixels the same color as Theme.PRIMARY_BODY will be transparent
)


]]>

function update_quest_target()
 CQWindow:clear()
 CQWindow:add_text("asdf")
end

function OnHelp ()
  world.Note (world.GetPluginInfo (world.GetPluginID (), 3))
end

</script>


<!--  Plugin help  -->

<aliases>
  <alias
   script="OnHelp"
   match="Quest_Campaign_Tracker:help"
   enabled="y"
  >
  </alias>
</aliases>

</muclient>
